# Spring中循环依赖时如何解决的



背景 只针对setter注入和field注入这两种方式,

field注入实质是通过Field反射注入,下面统称setter注入

案例 两个简单bean

```java
@Component
public class A {
    @Autowired
    private B b;
}

    @Component
public class B {
    @Autowired
    private A a;
}
}
```
背景知识

setter注入时bean的创建流程:  

1. 实例化. 调用bean的无参构建函数生成一个的实例.
2. 注入属性. 从容器中获取该bean待注入字段的实例(如果没有,进入待注入字段对应bean的创建流程),进行注入.
3.  初始化. 如果bean实现了InitializingBean或@PostConstruct形式的初始化方法,进行调用



DefaultSingletonBeanRegistry的四个属性

```java
/** Names of beans that are currently in creation. */
private final Set<String> singletonsCurrentlyInCreation 
/** Cache of singleton factories: bean name to ObjectFactory. */
private final Map<String, ObjectFactory<?>> singletonFactories 
/** Cache of early singleton objects: bean name to bean instance. */
private final Map<String, Object> earlySingletonObjects 
/** Cache of singleton objects: bean name to bean instance. */
private final Map<String, Object> singletonObjects 
```
主要方法
```java
getSingleton(String beanName, boolean allowEarlyReference)
getSingleton(String beanName, ObjectFactory<?> objectFactory)    
```
流程 




1. **请求获取A**
2. 从`singletonObjects`和`singletonsCurrentlyInCreation`都没发现A,说明A还不存在
3. 标记A开始创建,记录到`singletonsCurrentlyInCreation`
4. 实例化A.`singletonFactories`添加A
6. 开始注入属性,发现需要B,请求获取B
7. 从`singletonObjects`和`singletonsCurrentlyInCreation`都没发现B,说明B还不存在,
8. 标记B开始创建,记录到`singletonsCurrentlyInCreation`
9. 实例化B,`singletonFactories`添加B
11. B开始注入属性,发现需要A,请求获取A
12. 从`singletonObjects`没找到A但是`singletonsCurrentlyInCreation`中有A,`earlySingletonObjects`也没有A,最后从`singletonFactories`成功找到
13. 调用A的ObjectFactory.getObject()获取到A的引用, synchronize[移除A的`singletonFactories`,添加A的`earlySingletonObjects`],返回A的引用给步骤9
14. B注入属性完成,初始化完成.移除`singletonsCurrentlyInCreation`
15. synchronize[添加B到`singletonObjects`,从`earlySingletonObjects`移除B]
16. 给步骤5 **返回B**
17. A注入属性完成,初始化完成.移除`singletonsCurrentlyInCreation`
18. synchronize[添加A到`singletonObjects`,从`earlySingletonObjects`移除A,从`singletonFactory`移除A]
19. **返回A**

虽然B中的A是从earlySingletonObjects中获取的,但是他和最终存储在singletonObjects中的A是相同的引用.因此是相同的.





* singletonsCurrentlyInCreation 正在创建过程中的单例bean
* singletonObjects  完备的单例bean
* earlySingletonObjects 不完备单例bean
* singletonFactories 单例bean的工厂

四个阶段

* 标记开始创建
* 记录已经实例化
* 标记创建但不完备
* 标记创建完成

singletonObjcts和earlySingletonObjects记录的都是引用,




重点 getbean的递归

<div width='200px' height='200px'><?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="241px" height="221px" viewBox="-0.5 -0.5 241 221" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2020-11-04T09:56:00.294Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/13.7.9 Chrome/85.0.4183.121 Electron/10.1.3 Safari/537.36&quot; etag=&quot;jXb_M7qoHDYfn1W1nfAm&quot; version=&quot;13.7.9&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;cDzMSxyYgAm-GKg0IyNK&quot; name=&quot;第 1 页&quot;&gt;3ZRRT4MwEMc/DY8mQGVxr85NHzQzWaKPpqM32lgoljLAT+8hVxhZluiDL76Q6++u1+v/jgZslbf3lpfyyQjQQRyKNmB3QRwvrxf47UE3gMVNOIDMKjGgaAI79QkEfVitBFSzQGeMdqqcw9QUBaRuxri1ppmHHYyen1ryDM7ALuX6nL4q4STRJAwnxwOoTNLRceg9OffRBCrJhWlOEFsHbGWNcYOVtyvQvXhemGHf5oJ3rMxC4X6ywVbJm2Sb9mP7HK034fJlnx+vKMuR65puTMW6zkuAdZe9mXZaFQIsC9htI5WDXcnT3tFg55FJl2tcRWjuTY2R4nE/Ap6+Z7an29phGiBeDQ2PErSpErAO2otXjEbhcOLA5OBshyG0gXmtadrGMWqm3i0IyZOu+aHkNC3ZmHnSEw2S9Bfyxv9K3nHqSV6W/Jm8uJz+jG/fyfvC1l8=&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 0 15 C 0 6.72 13.43 0 30 0 C 37.96 0 45.59 1.58 51.21 4.39 C 56.84 7.21 60 11.02 60 15 L 60 65 C 60 73.28 46.57 80 30 80 C 13.43 80 0 73.28 0 65 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 60 15 C 60 23.28 46.57 30 30 30 C 13.43 30 0 23.28 0 15" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 180 155 C 180 146.72 193.43 140 210 140 C 217.96 140 225.59 141.58 231.21 144.39 C 236.84 147.21 240 151.02 240 155 L 240 205 C 240 213.28 226.57 220 210 220 C 193.43 220 180 213.28 180 205 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 240 155 C 240 163.28 226.57 170 210 170 C 193.43 170 180 163.28 180 155" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g></svg></div>



<div><?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="491px" height="411px" viewBox="-0.5 -0.5 491 411" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-11-05T02:31:51.882Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36&quot; etag=&quot;2tb1FjyA9iVx_gL63UQ2&quot; version=&quot;13.8.9-1&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;Lu7vE4lbq7QaLQGQI2sh&quot; name=&quot;Page-1&quot;&gt;7VdNc5swEP01HNMRyNjOMcF2PqaeTL4m9SkjwwaUyMgjZGPn11cCEURsY9fNtIf2wrBPq5X09u0iHBzMVheCzJMxj4A5HopWDh44ntc/9dVTA+sS8PsGiAWNSsitgXv6DgZEBl3QCLKGo+ScSTpvgiFPUwhlAyNC8Ny4mXAvnDVXnZMYNoD7kLBN9IlGMjHH8lGNXwKNk2plF5mRKQnfYsEXqVnP8fCoM3IHw3J4RqpYxj9LSMRzC8JDBweCc1m+PWYgbqav+oweYmSqaDZxi6OmVEWkPC3BLFGhPHRz57vXvVv3+va9M8vH9HkyXp4UNJAIHK+r9qR4xuc5oTqq2juy0D1B9sxOqF7i2NkvrP0AmSRC7o1SclPpbGuwmurZKgCmtDsqTfViUd7waI/4oRgBqdy3crXaruxeKTMhS80kqaXfqIPS8SGhmd6ZfsgEPvu27tjb4EDxu64qIE+ohPs5CbWdqyLXyZUzvUFXZ4oyFnDGReGNR14Q9EdaPVLwN7BGhqh35uuRF55KC8enOPC7Ci+KBSITN3sDGSbGOJBSQ/0ShISVVb/mbBfAZyDFWrmYUWyKzzSnqhbzutLdCkusKu8ajJjmEn8E9mz9GDZ/T07YnImwBWxoIuWfE/2PJM7t/7HM7SrNBwE6BXe6Q5f1qIDCsj8cVW6f02t0ObiZdNDDcPx88fjUR2cn9hl/ufAIo7Fu96GiFlRKzkPOGJlndFoEQAWSSkJTPVpMERAuREaXcAdZ+aVF7QnfIZGjhbCR4EO1sVMIHdQUAu793Rremme8UZsQqVuGMbmQCY95StiwRs9r9Dvnc8PiK0i5NpckspC8qQhYUflDJ/Wbb6yJNTJYmXwXxroyUnVma5I2J/ZYPa2w1l8uGiXJZZtmNFVHKEbRzRcihJa0mLuTukrEIA8sU0uBApi6ci2bm/uCxhJopokW1VUE5Nje0v5RV4C6QWud/e8yB3QZ7H363HS2dBm0pct0vqTLKKj+ESjcrZ8tPPwJ&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(244, 241, 222);"><defs/><g><g id="cell-OR51J7Q1JQz4mwMi_YMv-2" content="&lt;UserObject label=&quot;I have a tooltip&quot; tooltip=&quot;This is the tooltip&quot;/&gt;" data-label="I have a tooltip" data-tooltip="This is the tooltip"><rect x="0" y="0" width="120" height="60" rx="9" ry="9" fill="none" stroke="none" pointer-events="all"/><path d="M 2.23 2.28 C 2.23 2.28 2.23 2.28 2.23 2.28 M 2.23 2.28 C 2.23 2.28 2.23 2.28 2.23 2.28 M -0.62 11.46 C 3.85 8.47 5.9 5.05 9.09 0.56 M 0.09 10.2 C 3.51 6.36 6.61 3.21 9.76 0.53 M -0.17 15.46 C 6.95 11.67 9.88 5.22 15.13 1.63 M 1.24 15.42 C 4.63 10.26 9.66 4.93 14.51 0.85 M 0.36 20.65 C 6.37 16.67 11.26 9.45 18.92 0.84 M 0.96 23.11 C 8.89 13.32 16.42 4.44 19.08 0.9 M 2.54 28.24 C 9.44 20.49 12.35 12 26.61 -0.17 M 0.61 27.23 C 6.76 20.97 13.4 14.65 24.32 0.53 M -0.1 33.7 C 8.32 26.51 14.66 16.9 29.09 1.32 M 1.59 34.47 C 6.6 27.79 12.7 19.39 29.68 0.58 M 2.64 41.44 C 7.63 30.47 16.13 24.33 36.69 -1.27 M 1.22 41.33 C 9.23 30.3 20.28 20.25 35.29 1.64 M 0.38 46.3 C 13.05 31.46 24.86 19.63 40.56 2.16 M 0.43 46.77 C 16.25 27.65 32.33 9.82 40.11 1.11 M 1.62 50.36 C 19.87 30.59 34.58 11.71 44.16 -0.31 M 2.04 52.13 C 11.9 40.25 22.48 27.6 46.32 1.62 M 1.09 55.09 C 13.54 43.45 22.98 31.46 53.25 -1.44 M 3.06 56.43 C 18.73 38.27 35.42 18.43 52.2 -0.63 M 3.85 61.43 C 25.44 37.25 42.98 18.15 55.37 2.49 M 5.6 59.53 C 23.72 38.26 41.35 18.1 56.5 0.56 M 12.09 59.28 C 31.22 37.33 51.22 12.84 61.91 0.85 M 10.58 60.76 C 25.93 41.26 42.61 22.28 63.32 -0.31 M 17.87 58.71 C 28.11 42.73 44.65 29.04 67.52 2 M 15.31 59.31 C 31.03 40.83 47.66 23.5 66.49 0 M 21.17 59.78 C 33.87 46.82 44.69 36.01 71.54 -0.77 M 20.47 59.08 C 32.55 47.94 42.47 35.17 71.76 0.57 M 24.62 61.45 C 46.56 38.54 64.57 16.05 76.7 0.25 M 25.65 60.79 C 46.44 35.71 66.49 12.18 78.51 0.93 M 32.28 59.13 C 49.53 39.7 68.08 19.45 83.97 0.75 M 31.08 60.63 C 51.22 37.37 70.83 15.3 83.34 1.72 M 36.43 58.2 C 53.93 38.47 69.97 18.74 89.86 2.35 M 37.19 60.91 C 49.71 47.11 60.06 32.51 88.35 -0.24 M 42.88 59.96 C 56.57 40.96 71.37 25.74 93.95 1.88 M 42.93 59.1 C 62.13 37.49 79.73 15.84 93.47 0.51 M 46.53 58.92 C 64.66 41.14 82.7 19.84 100.84 0.58 M 48.09 60.3 C 64.76 40.27 84.22 18.93 99.36 0.35 M 53.32 60.03 C 63.59 43.11 77.64 32.18 103.73 1.43 M 52.15 59.57 C 67.29 42.62 81.08 26.12 103.77 1.03 M 59.72 59.93 C 73.89 41.61 88.48 25.22 110.35 2.31 M 58.72 60.3 C 70.23 43.51 84.58 28.14 110.44 -0.02 M 62.78 60.22 C 85.27 37.63 101.9 13.61 114.48 1.35 M 64.37 60.59 C 79.55 41.45 94.98 23.34 115.45 0.77 M 67.61 60.68 C 88.1 37.66 107.72 19.02 120 4.33 M 69.03 59.66 C 79.88 48.2 91.99 34.09 118.11 1.66 M 72.71 61.3 C 86.23 45.44 98.77 33.74 120.31 9.5 M 74.17 60.9 C 84.64 47.3 95.83 35.65 119.34 7.5 M 80.75 59.74 C 94.99 40.7 112.92 22.16 120.98 12.03 M 78.52 60.58 C 88.23 48.87 98.54 37.45 121.13 11.32 M 85.38 60.89 C 98.11 47.34 107.67 30.91 123.39 18.32 M 83.66 60.41 C 97.41 45.24 110.9 29 121.06 17.8 M 88.53 58.81 C 101.6 47.08 110.67 36.09 120.58 23.92 M 90.27 60.69 C 103.19 45.63 115.15 32.18 123.05 22.3 M 95.95 62.02 C 103.4 51.19 107.58 43.72 122.15 30.36 M 94.51 60.71 C 104.13 49.97 113.46 38.83 121.13 28.77 M 99.21 58.71 C 105.54 53.8 109.56 47.57 121.63 36.86 M 100.89 59.08 C 108.77 50.85 117.01 42.71 121.66 36.63 M 107.15 62.05 C 109.91 57.02 114.04 52.2 123.21 41.82 M 104.65 60.12 C 112.07 52.96 118.77 44.88 120.96 41.38 M 111.79 59.48 C 113.31 57.43 116.92 56.12 120.76 48.24 M 110.71 60.17 C 113.29 56.91 115.28 55.11 121.13 47.37" fill="none" stroke="#f2cc8f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 7.46 1 M 10.52 0.05 C 35.24 0.35 63.52 0.16 109.65 1.22 M 8.31 0.74 C 49.52 0.59 89.36 0.79 111.23 0.39 M 111 0 C 117.07 1.81 121.8 4.82 121.39 7.97 M 111.69 0.81 C 118.24 -1.15 118.46 3.68 121.66 9.17 M 118.67 10.8 C 117.8 24.64 118.45 40.15 121.85 50.83 M 120.53 8.49 C 119.21 18.3 119.95 26.61 119.44 51.36 M 120 51 C 121.48 57.45 115.64 60.63 109.83 61.89 M 118.45 51.49 C 118.48 59.22 117.84 61.02 109.99 57.84 M 111.31 58.1 C 81.2 59.28 48.6 61.22 7.62 61.69 M 110.41 60.82 C 84.21 61.66 58.93 60.6 9.02 59.42 M 9 60 C 1.47 61.86 1.66 56.1 1.04 50.43 M 8.77 58.42 C 1.8 61.71 1.37 56.49 -0.55 50.63 M -1.98 51.66 C -0.87 37.96 -0.99 23.94 0.36 8.71 M 0.45 50.32 C 0.06 38.69 0.2 26.16 0.06 9.06 M 0 9 C -0.62 3.93 3.27 0.04 10.28 0.53 M 1.12 8.38 C -1.73 3.35 4.96 -0.94 9.2 1.73" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 30px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #393C56; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">I have a tooltip</div></div></div></foreignObject><text x="60" y="34" fill="#393C56" font-family="Helvetica" font-size="12px" text-anchor="middle">I have a tooltip</text></switch></g></g><g id="cell-OR51J7Q1JQz4mwMi_YMv-3"><rect x="150" y="0" width="120" height="60" rx="9" ry="9" fill="none" stroke="none" pointer-events="all"/><path d="M 151.96 2.58 C 151.96 2.58 151.96 2.58 151.96 2.58 M 151.96 2.58 C 151.96 2.58 151.96 2.58 151.96 2.58 M 152.06 8.58 C 153.75 7.42 156.4 4.56 159.08 0.85 M 151.33 9.89 C 153.65 7.26 155 4.68 159.76 -0.34 M 152.61 17.55 C 155.73 9.54 160.16 2.3 164.7 -0.47 M 151.03 16.58 C 154.82 12.06 158.41 6.84 164.18 0.2 M 152.03 21.93 C 157.5 14.89 162.08 7.73 171.24 1.95 M 150.56 22.66 C 158.23 14.22 163.34 6.16 170.26 1.19 M 152.08 26.8 C 156.43 19.07 167.31 11.37 175.24 -0.64 M 150.9 28.61 C 159.71 17.29 167.76 7.51 174.32 0.52 M 151.91 36.36 C 161.57 20.33 172.89 8.89 181.02 0.95 M 149.71 35.11 C 156.69 26.94 164.38 17.97 180.21 -0.24 M 149.67 41.38 C 158.72 31.86 166.72 22.1 186.14 0.94 M 151.49 40.92 C 163.96 26.09 176.84 10.81 184.96 -0.65 M 149.67 45.51 C 159.18 34.59 170.59 23.32 191.18 2.57 M 150.59 45.68 C 162.58 31.95 174.65 17.99 191.52 0.14 M 149.96 53.86 C 163.37 38.81 172.26 27.47 198.05 0.01 M 151.79 52.14 C 162.69 39.29 174.57 24.57 196.95 -0.15 M 152.15 56.74 C 167.93 36.67 186.99 17.21 199.83 2.32 M 151.93 56.47 C 166.48 41.1 178.04 28.35 201.17 0.71 M 155.84 60.36 C 173.97 41 187.72 20.12 207.03 -0.61 M 155.3 60.55 C 171.24 39.68 189.02 21.35 207.17 -0.13 M 160.22 57.47 C 179.85 35.25 198.74 16.41 213.47 1.84 M 161.12 59.23 C 179.62 39.41 196.13 18.27 211.71 1.05 M 165.32 60.62 C 177.17 44.54 190.26 33.35 217.87 -0.24 M 165.75 59.15 C 176.58 46.01 189 32.51 216.91 1.72 M 172.26 61.28 C 191.11 38.52 209.07 17.43 221.01 -1.15 M 170.73 60.48 C 187.33 41.12 204.71 21.39 222.22 0.95 M 177.64 61.04 C 187.46 43.82 201.07 28.14 228.75 2.65 M 176.22 59.7 C 198.03 35.7 218.52 13.39 227.46 0.16 M 180.7 61.82 C 193.85 48.6 204.87 36.16 231.76 1.17 M 181.98 60.43 C 195.99 43.11 212.67 25.36 233.35 1.39 M 186.97 58.55 C 202.32 42.41 216.78 29.6 237.28 0.9 M 187.92 59.64 C 200.89 43.95 213.52 29.09 239.21 -0.11 M 192.04 61.1 C 212.01 38.05 228.4 15.09 245.46 0.7 M 191.82 60.24 C 205.19 46.16 215.94 30.85 244.26 -0.43 M 197.92 58.2 C 212.05 43.75 227.41 29.28 249.14 1.74 M 198.58 60.59 C 216.89 37.11 234.41 17.16 249.24 1.59 M 200.83 59.43 C 220.18 41.19 238.09 20.35 253.57 0.2 M 201.89 59.02 C 218.38 43.35 233.22 24.69 253.03 0.62 M 207.5 59.1 C 220.51 46.95 231.8 31.13 259.42 1.46 M 207.5 59.37 C 223.53 43.07 237.74 25.84 259.66 1.62 M 215.02 58.25 C 230.26 36.31 248.7 17.01 264.6 -0.48 M 212.89 59.56 C 228.79 42.47 245.15 24.69 264.92 0.89 M 218.45 61.25 C 233.48 42.33 246.68 29.56 268.63 1.72 M 217.86 59.78 C 235.13 41.86 249.81 23.14 268.69 3.33 M 225.97 58.06 C 240.92 38.94 259.33 21.03 269.61 7.88 M 223.54 59.37 C 233.84 47.84 245.4 35.46 270.85 7.22 M 227.91 60.43 C 241.72 45.36 253.92 29.66 274.04 10.02 M 228.36 60.55 C 245.11 42 261.84 22.82 272.92 10.5 M 234.46 60.5 C 244.83 50.17 250.19 42.22 273.9 17.06 M 235.63 59.68 C 248.5 44.46 262.69 28.42 272.15 17.09 M 241.44 58.82 C 248.72 48.92 258.02 38.9 270.95 21.95 M 240.27 60.87 C 248.52 49.73 258.96 40.12 271.63 22.62 M 244.66 58.26 C 250.56 50.9 257.27 43.77 271.21 29.42 M 244.99 60.4 C 254.03 49.45 262.39 41.1 271.72 29.72 M 249.68 59.93 C 257.35 54.22 263.64 48.13 273.33 36.14 M 251.06 60.37 C 255.94 53.55 262.53 45.11 272.36 34.82 M 253.5 61.89 C 261.59 53.9 266.86 48.29 272.99 43.67 M 255.84 59.9 C 261.21 53.49 269.06 44.76 272.32 40.72 M 261.5 59.51 C 264.34 57.15 267.24 49.98 271.85 49.52 M 260.8 60.77 C 263.47 57.25 265.76 55.36 272.02 48.43" fill="none" stroke="#f2cc8f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 159.61 -1.17 M 160.05 -1.75 C 185.04 0.43 206.81 0.28 260.27 0.34 M 159.57 -0.61 C 195.45 0.4 232.55 -0.74 260.89 -0.67 M 261 0 C 265.61 0.56 269.06 4.34 269.55 8.28 M 262.61 -1.83 C 266.62 -2.15 268.74 1.62 268.12 10.8 M 270.82 9.53 C 269.45 18.5 268.5 30.27 269.23 50.19 M 270.45 9.37 C 270.37 18.71 269.99 28.8 269.53 50.95 M 270 51 C 271.35 55.66 265.52 61.98 260.26 61.6 M 269.2 52.6 C 269.81 57.59 264.8 59.03 260.84 58.66 M 261.88 60.37 C 229.03 58.52 197.74 57.97 160.84 60.73 M 261.06 59.57 C 237.87 60.2 213.81 60.28 159.02 59.52 M 159 60 C 153.58 60.54 150.38 58.89 150.32 51.84 M 158.14 61.11 C 154.51 59.65 150.12 58.94 151.08 49.98 M 149.67 49.73 C 148.06 37.61 147.79 23.85 151.79 8.42 M 150.08 50.2 C 150.18 41.18 149.23 30.75 149.53 8.86 M 150 9 C 150.46 2.53 151.49 1.45 158.7 0.73 M 149.45 10.68 C 152.24 1.03 151.24 -2.2 157 1.68" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 30px; margin-left: 151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #393C56; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">I have no tooltip</div></div></div></foreignObject><text x="210" y="34" fill="#393C56" font-family="Helvetica" font-size="12px" text-anchor="middle">I have no tooltip</text></switch></g></g><g id="cell-_nJ0HDOY40TEM_GUW80A-1" content="&lt;UserObject label=&quot;Tree Root&quot; treeRoot=&quot;1&quot;/&gt;" data-label="Tree Root" data-treeRoot="1"><rect x="370" y="350" width="120" height="60" rx="9" ry="9" fill="none" stroke="none" pointer-events="all"/><path d="M 372.49 351.97 C 372.49 351.97 372.49 351.97 372.49 351.97 M 372.49 351.97 C 372.49 351.97 372.49 351.97 372.49 351.97 M 371.56 360.55 C 374.17 357.6 374.98 353.92 378.77 348.77 M 370.46 359.85 C 372.36 358 374.64 355.45 379.78 350.63 M 370.73 367.25 C 374.82 359.26 382.42 353.72 382.89 351.23 M 370.38 365.95 C 374.63 360.44 380.24 353.84 383.66 350.17 M 371.47 373.02 C 376.97 363.85 383.16 358.56 391.86 348.62 M 371.74 372.54 C 374.71 366.44 379.01 362.29 390.6 349.31 M 371.35 378.19 C 379.75 366.14 389.13 356.79 395.69 349.05 M 370.08 377.87 C 375.57 372.39 382.47 365.27 394.6 350.9 M 369.34 383.85 C 382.27 371.51 391.91 359.94 399.66 348.24 M 371.76 384.93 C 380.5 372.31 389.63 361.89 399.92 350.77 M 370.53 391.52 C 378.36 380.26 385.5 370.74 406.4 350.18 M 370.04 390.3 C 381.88 377.67 391.48 366.23 406.65 349.94 M 370.48 397.24 C 380.82 385.52 393.28 370.22 410.15 351.15 M 370.39 396.7 C 377.93 386.69 386.21 378.45 411 350.18 M 370.88 403.1 C 383.28 386.04 399.37 372.17 414.49 349.34 M 370.16 402.14 C 380.83 390.82 391.29 379.16 415.93 350.12 M 371.27 404.55 C 385.24 390.59 401.42 372.95 420.08 352.36 M 373.22 405.73 C 382.36 394.98 391.88 383.68 420.89 350.35 M 373.41 409.27 C 393.29 390.2 408.63 371.28 428.9 351.31 M 374.33 410.02 C 387.08 397.54 397.37 383.48 427.06 350.02 M 381.55 411.14 C 400.95 384.48 422.96 361.78 432.73 352.15 M 380.35 409.63 C 396.98 392.89 410.35 376.16 431.71 351.63 M 386.29 410.93 C 400.64 394.13 416.27 376.29 438.04 348.91 M 386.1 409.31 C 402.49 393.24 417.44 373.86 438.18 350.95 M 392.08 409.97 C 407.18 391.3 420.23 373.15 442.48 351.09 M 390.82 410.3 C 410.74 387.2 430.41 364.56 442.22 349.81 M 394.99 408.57 C 413.18 390.86 429.21 369.09 447.13 349.7 M 395.9 410.17 C 407.05 398.31 417.3 386.06 447.29 350.72 M 403.73 411.26 C 416.49 393.31 432.67 373.21 452.21 348.79 M 402.85 408.63 C 418.71 390.17 433.91 371.07 452.22 349.94 M 407.99 410.17 C 422.52 393.29 435.78 376.58 458.82 351.06 M 407.69 410.44 C 422.55 392.16 437.29 373.49 457.89 351.6 M 410.81 411.01 C 424.35 397.37 433.48 385.81 463.23 349.88 M 412.16 409.96 C 427.7 392.31 440.65 377.08 463.52 351.28 M 416.24 408.73 C 429.91 392.67 444.49 378.94 467.28 350.63 M 417.47 410.23 C 430.72 393.65 445.88 378.02 468.01 351.86 M 423.08 408.99 C 436.54 393.16 447.32 381.43 473.34 350.01 M 422.93 411.11 C 439.36 391.65 455.81 372.07 474.93 350.35 M 427.16 408.28 C 440.47 394.8 457.25 378.46 478.78 349.34 M 428.25 408.84 C 438.8 395.8 450.43 383.1 479.86 351.75 M 431.79 411.24 C 450.2 389.54 464.34 373.83 486.82 349.89 M 432.9 409.91 C 447.97 393.26 463.54 375.86 485.31 349.88 M 438.66 409.91 C 452.09 393.47 462.77 379.79 487.11 352.42 M 439.06 409.84 C 449.24 398.51 458.67 386.49 488.18 353.52 M 442.31 409.11 C 457.92 394.21 473.13 376.92 490.5 356.02 M 442.98 409.14 C 456.99 395.13 470.89 379.58 490.6 356.66 M 448.42 410.46 C 456.71 400.88 467.78 389.68 492.86 361.87 M 449.29 410.77 C 460.88 397 472.91 383.03 492.6 360.91 M 455.5 409.96 C 465.69 398.39 473.53 385 490.85 365.4 M 453.6 410.34 C 461.84 402.14 468.57 392.81 491.94 367.11 M 458.6 409.56 C 470.63 397.93 477.96 388.02 492.73 374.72 M 460.3 411.14 C 466.05 402.91 472.56 394.12 491.86 374.37 M 465.65 411.18 C 471.46 403.81 477.98 398.22 492.21 377.05 M 465.7 410.77 C 475.94 397.41 485.15 387.04 492.89 379.94 M 469.84 412.11 C 478.03 402.98 483.55 393.44 492.12 385.98 M 470.51 409.97 C 475.06 404.97 478.42 399.86 491.49 385.06 M 474.57 410.22 C 480.22 404.44 484.28 402.49 490.04 390.29 M 475.72 410.44 C 482.43 402.5 487.97 397.37 491.66 391.3 M 481.68 411.13 C 484.25 408.3 485.45 404.29 491.33 396.65 M 480.97 409.86 C 482.6 407.21 485.55 405.41 491.02 397.57" fill="none" stroke="#f2cc8f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 377.62 351.34 M 377.75 349.83 C 417.49 350.62 453.5 349.27 482.14 348.11 M 379.58 349.14 C 402.19 351.1 425.11 351.57 480.72 350.01 M 481 350 C 488.14 350.22 489.58 353.39 491.54 358.62 M 480.32 351.41 C 488.87 348.7 491.18 352.81 490.97 360.49 M 489.5 359.91 C 488.69 369.47 489.89 379.92 490.1 402.67 M 489.41 358.74 C 488.89 375.88 489.36 392.11 489.93 400.28 M 490 401 C 488.06 405.92 486.6 409.67 480.66 408.04 M 490.77 401.6 C 489.32 406.55 487.18 409.87 479.79 412.16 M 481.91 409.9 C 454.15 407.68 428.59 409.37 380.02 409.4 M 481.59 409.74 C 447.01 408.31 414.39 410.21 378.67 409.54 M 379 410 C 371.41 410.52 368.12 408.12 368.63 401.72 M 379.04 408.09 C 374.65 408.3 367.86 405.12 367.95 398.72 M 369.07 401.1 C 371.31 390.83 370.71 379.92 368.56 358.24 M 369.74 401.01 C 369.72 389.44 371.1 380.08 369.16 358.44 M 370 359 C 370.89 353.55 373.23 348.13 377.29 351.81 M 370.12 360.65 C 371.14 354.84 373.74 351.26 377.87 350.39" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 380px; margin-left: 371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #393C56; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Tree Root</div></div></div></foreignObject><text x="430" y="384" fill="#393C56" font-family="Helvetica" font-size="12px" text-anchor="middle">Tree Root</text></switch></g></g><g id="cell-_nJ0HDOY40TEM_GUW80A-3"><path d="M 340 260 Q 340 305 385 305 Q 430 305 430 343.63" fill="none" stroke="none" pointer-events="stroke"/><path d="M 430 348.88 L 426.5 341.88 L 430 343.63 L 433.5 341.88 Z" fill="none" stroke="none" pointer-events="all"/><path d="M 339.69 258.66 M 340 260 C 341.58 288.43 355.4 303.37 386.23 306.71 M 339.97 260.61 C 340.3 292.12 355.48 303.04 385.38 304.72 M 385 305 C 416.52 305.46 430.52 319.2 430.33 345.47 M 384.96 305.74 C 416.78 304.59 428.82 316.51 431.88 343.69" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 426.47 341.91 C 426.47 341.91 426.47 341.91 426.47 341.91 M 426.47 341.91 C 426.47 341.91 426.47 341.91 426.47 341.91 M 428.19 346.28 C 428.7 345.2 429.16 344.61 430.41 343.82 M 428.16 346.1 C 428.84 345.33 429.64 344.4 430.04 343.72" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 428.51 346.91 M 430.34 348.38 C 429.94 346.74 427.82 345.88 426.59 342.06 M 430.37 349.07 C 428.4 345.75 426.92 343.32 426.44 342.07 M 426.16 341.81 C 427.24 342.46 428.14 342.83 430.21 343.41 M 426.47 341.89 C 427.68 342.45 428.44 342.75 429.88 343.62 M 429.97 343.78 C 430.96 343.29 432.87 342.03 433.4 341.97 M 429.89 343.6 C 431.06 342.93 432.56 342.31 433.35 341.81 M 433.37 341.38 C 432.48 344.8 430.53 347.58 430.75 348.69 M 433.87 342.22 C 432.29 344.12 431.81 345.99 429.9 348.54" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-_nJ0HDOY40TEM_GUW80A-2" content="&lt;UserObject label=&quot;Central Idea&quot; treeRoot=&quot;1&quot;/&gt;" data-label="Central Idea" data-treeRoot="1"><ellipse cx="340" cy="240" rx="50" ry="20" fill="none" stroke="none" pointer-events="all"/><path d="M 290.56 238.34 C 290.56 238.34 290.56 238.34 290.56 238.34 M 290.56 238.34 C 290.56 238.34 290.56 238.34 290.56 238.34 M 291.75 240.43 C 294.89 236.8 299.7 232.74 303.13 231.12 M 292.38 242.12 C 295.04 239.33 297.58 236.7 302.83 229.76 M 297.18 244.81 C 301.42 239.02 307.55 229.94 310.67 228.79 M 296.07 245.63 C 299.35 238.54 306.14 232.91 310 228.71 M 296.94 247.6 C 305.34 240.95 309.75 236.41 316.78 226.93 M 296.89 249.42 C 304.94 240.55 312.06 233.18 317.79 224.28 M 300.14 249.75 C 306.1 243.32 312.34 236.19 322.96 221.34 M 300.94 251.34 C 309.97 241.59 317.58 232.64 324.25 223.58 M 305.35 253.44 C 312.3 240.2 321.67 231.22 331.91 224.31 M 304.89 251.7 C 312.81 243.33 321 232.18 330.03 224.26 M 309.62 252.71 C 318.56 242.22 326.45 232.82 335.41 224.5 M 309.24 254.42 C 317.66 243.37 328.01 232.63 336.15 223.98 M 314.4 254.74 C 321.54 243 334.09 233.39 342.41 223.96 M 312.19 256.18 C 320.05 248.2 325.36 240.87 340.13 223.54 M 316.31 257.81 C 324.27 249.53 330.32 239.9 344.96 223.36 M 316.43 256.49 C 327.78 244 337.9 231.54 345.9 223.98 M 321.74 256.35 C 328.03 249.88 335.15 238.59 352.24 224.23 M 321.72 256.67 C 330.74 245.99 339.83 236.23 351.82 222.94 M 325.56 258.4 C 332.06 250.65 340.2 242.13 355.93 224 M 325.62 259.36 C 336.84 247.96 347.03 234.74 356.08 223.63 M 331.03 257.11 C 336.97 248.85 347.66 240.21 360.76 224.45 M 331.39 258 C 342.56 247 352.33 233.27 361.22 225.3 M 337.3 260.55 C 347.44 244.65 359.46 232.87 365.31 228.01 M 335.51 258.61 C 346.53 248.92 355.09 237.98 364.95 225.52 M 340.57 257.11 C 351.62 250.27 360.27 239.44 367.26 227.72 M 340.8 259.25 C 348.61 250.3 354.97 242.6 369.4 226.19 M 347.56 259.11 C 353.26 250.25 361.71 241.35 372.76 230.25 M 345.9 259.57 C 353.12 252.94 358.11 245.69 374.44 228.49 M 352.72 260.71 C 358.8 248.63 367.12 240.06 377.73 230.39 M 352.53 258.75 C 362.52 246.88 371.46 235.36 379.09 229.43 M 356.35 260.7 C 363.22 255.57 365.99 249.4 380.6 230.81 M 357.56 260.32 C 364.87 251.94 371.51 243.6 382.13 229.6 M 361.12 260.74 C 368.86 250.04 376.31 241.99 382.88 232.8 M 363.53 258.34 C 371.04 249.49 380.7 239.71 384.78 233.89 M 369.6 257.38 C 378.27 247.56 384.75 239.76 389.2 236.29 M 368.19 257.43 C 372.66 253.25 378.05 248.49 386.65 237.46 M 376.07 257.03 C 380.26 250.9 382.39 249.97 389.99 241.8 M 376.33 255.81 C 380.38 251.39 384.17 245.53 390.52 239.85" fill="none" stroke="#f2cc8f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 323.66 221.82 C 332.13 220.42 344.71 221.61 354.01 222.62 C 363.31 223.64 373.61 225.05 379.46 227.92 C 385.3 230.79 389.05 235.79 389.1 239.83 C 389.15 243.86 385.69 249.09 379.77 252.12 C 373.85 255.15 362.81 257.04 353.57 258 C 344.32 258.96 333.3 259.14 324.32 257.89 C 315.34 256.63 305.36 253.67 299.69 250.46 C 294.01 247.26 289.91 242.32 290.28 238.66 C 290.65 235 295.88 231.36 301.89 228.5 C 307.9 225.64 321.86 222.69 326.33 221.48 C 330.8 220.28 328.65 221.03 328.7 221.28 M 341.53 221.09 C 351.23 220.98 362.95 223.87 370.59 225.95 C 378.22 228.04 384.73 230.11 387.35 233.62 C 389.98 237.14 389.97 243.37 386.35 247.05 C 382.73 250.73 374.08 253.8 365.63 255.71 C 357.17 257.61 345.37 258.41 335.61 258.46 C 325.85 258.52 314.26 258.2 307.06 256.01 C 299.86 253.83 294.37 249.51 292.4 245.36 C 290.44 241.21 291.67 234.7 295.26 231.13 C 298.85 227.56 306.5 225.72 313.93 223.95 C 321.36 222.19 335.46 220.85 339.86 220.53 C 344.25 220.21 340.18 221.85 340.31 222.02" fill="none" stroke="#e07a5f" stroke-linejoin="round" stroke-linecap="round" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 240px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #393C56; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Central Idea</div></div></div></foreignObject><text x="340" y="244" fill="#393C56" font-family="Helvetica" font-size="12px" text-anchor="middle">Central Idea</text></switch></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>

</div>

[高频面试题：Spring 如何解决循环依赖？](https://zhuanlan.zhihu.com/p/84267654)
[【Spring】浅谈spring为什么推荐使用构造器注入](https://www.cnblogs.com/joemsu/p/7688307.html)